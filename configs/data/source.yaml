# 数据源配置文件
# Data Source Configuration

# 数据源配置
data:
  # 主数据源（优先级最高）
  # 可选值: local_csv, tushare, akshare
  primary_provider: "local_csv"

  # 降级策略（按顺序尝试）
  # 当主数据源失败时，按顺序尝试备用数据源
  fallback_chain:
    - "local_csv"
    - "tushare"
    - "akshare"

  # 是否启用自动降级
  # true: 主数据源失败时自动尝试备用数据源
  # false: 主数据源失败时直接报错
  auto_fallback: true

  # 本地CSV数据提供器配置
  local_csv:
    # 是否启用
    enabled: true

    # 数据目录（修改为你的本地数据路径）
    # Windows路径示例: "C:/Users/123/A股数据/个股数据"
    # Linux路径示例: "/home/user/stock_data"
    data_dir: "C:/Users/123/A股数据/个股数据"

    # 文件格式
    # csv: 标准CSV格式
    # pickle: Python pickle格式（读取更快）
    # parquet: Parquet格式（压缩率高）
    file_format: "csv"

    # 缓存配置
    cache:
      # 是否启用LRU缓存
      enabled: true

      # 缓存大小（最多缓存多少只股票）
      # 建议值: 50-200（根据内存大小调整）
      max_size: 100

    # 并行读取配置
    parallel:
      # 是否启用并行读取（多线程）
      # 适合批量读取大量股票时使用
      enabled: false

      # 最大工作线程数
      max_workers: 8

    # 数据清洗配置
    cleaning:
      # 是否验证TS代码（确保代码与文件内容匹配）
      # true: 更安全，但略慢
      # false: 更快，但可能加载错误数据
      validate_tscode: true

      # 是否过滤未来日期
      # true: 过滤掉日期大于今天的记录
      # false: 保留所有日期（包括未来）
      filter_future: true

  # Tushare数据提供器配置
  tushare:
    # 是否启用
    enabled: true

    # Tushare Token
    # 支持两种方式配置：
    # 1. 直接在这里填写: "your_token_here"
    # 2. 设置环境变量: export TUSHARE_TOKEN="your_token_here"
    token: "${TUSHARE_TOKEN}"

    # 重试配置
    retry:
      # 最大重试次数
      max_attempts: 3

      # 重试间隔（秒）
      delay: 1

    # 超时配置（秒）
    timeout: 30

  # Akshare数据提供器配置
  akshare:
    # 是否启用
    enabled: true

    # 重试配置
    retry:
      # 最大重试次数
      max_attempts: 3

      # 重试间隔（秒）
      delay: 1

# 数据缓存配置（跨回测共享）
cache_store:
  # 是否启用持久化缓存
  enabled: false

  # 缓存类型
  # disk: 磁盘缓存（跨进程、跨回测）
  # memory: 内存缓存（仅当前进程）
  # redis: Redis缓存（需要Redis服务器）
  type: "disk"

  # 缓存目录（仅disk类型）
  dir: "data/cache"

  # 缓存TTL（秒）
  # 86400 = 24小时
  ttl: 86400

  # 最大缓存大小（MB）
  max_size: 1024

# 日志配置
logging:
  # 日志级别
  # DEBUG: 详细信息（开发时使用）
  # INFO: 标准信息
  # WARNING: 警告信息
  # ERROR: 错误信息
  level: "INFO"

  # 日志文件
  file: "logs/data_provider.log"

  # 日志轮转配置
  rotation:
    # 单个日志文件最大大小（MB）
    max_size: 10

    # 保留的日志文件数量
    backup_count: 5

# 调试配置
debug:
  # 是否启用调试模式
  # 会记录更多日志信息，影响性能
  enabled: false

  # 性能监控
  profile:
    # 是否启用性能分析
    enabled: false

    # 性能日志文件
    file: "logs/profile.log"
